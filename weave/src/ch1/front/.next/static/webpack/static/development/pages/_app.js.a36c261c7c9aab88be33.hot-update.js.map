{"version":3,"file":"static/webpack/static\\development\\pages\\_app.js.a36c261c7c9aab88be33.hot-update.js","sources":["webpack:///./components/ContentForm.js"],"sourcesContent":["// mode변경 test\r\nimport React, { useCallback, useState, useEffect }  from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { ADD_COMMENT_REQUEST } from '../reducers/post';\r\n\r\nimport '../components/Contents.css';\r\nimport Link from 'next/link';\r\nimport '../components/reset.css';\r\n\r\nconst ContentForm = ({post}) => {\r\n    \r\n    const [comments, setComments ] = useState('');\r\n    const [ commentFormOpened, setCommentFormOpened] = useState(false);\r\n    const { me } = useSelector(state => state.user);\r\n    const dispatch = useDispatch();\r\n\r\n    const { imagePaths, postAdded, mainPosts, GroupPosts, commentAdded, isAddingComment } = useSelector(state => state.post);\r\n\r\n    // 댓글\r\n    const onChangeComment = useCallback((e) => {\r\n        setComments(e.target.value);\r\n    }, []);\r\n\r\n    //댓글창토글\r\n    const onToggleComment = useCallback(() => {\r\n        setCommentFormOpened(prev => !prev);\r\n      }, []);\r\n\r\n    // 댓글올리기 사이클\r\n    // const onSubmitComment = useCallback((e) => {\r\n    //     e.preventDefault();\r\n    //     dispatch({\r\n    //         type: ADD_COMMENT_REQUEST,\r\n    //         data: {\r\n    //             text,\r\n    //         },\r\n    //     });\r\n    // }, []);\r\n    const onSubmitComment = useCallback((e) => {\r\n        e.preventDefault();\r\n        if(!me){\r\n            return alert('로그인이 필요합니다.');\r\n        }\r\n        return dispatch({\r\n            type: ADD_COMMENT_REQUEST,\r\n            data:{\r\n\r\n            },\r\n        });\r\n    }, [me && me.id]);\r\n\r\n    useEffect(() => {\r\n        setComments('');\r\n    },[commentAdded === true]);\r\n\r\n    if(postAdded===false)\r\n    return(\r\n        <div className=\"letsbegin\" >\r\n            <div className=\"startT\">그룹에 재미있는 이야기를 써보세요.</div>\r\n        </div>\r\n    );\r\n    if(postAdded===true)\r\n    return(\r\n        <div className=\"letsbegin\" >\r\n            {/* 게시물올라갈부분 */}\r\n            {mainPosts.map((v) => {\r\n                return(\r\n                    <div key={v} className=\"postbox\">\r\n                        <div className=\"contBox\">\r\n                            {/* <img alt=\"example\" src={post.img}/>  */}\r\n                            {imagePaths.map((c) => (\r\n                                <div key={c} style={{display:\"inline-block\"}}>\r\n                                    <img src={`http://localhost:3000/${c}`} style={{ width:'200px'}} alt={c}></img> \r\n                                    <div>\r\n                                        <button>제거</button>\r\n                                    </div>   \r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                        <div className=\"btnsbox\">\r\n                            <button type=\"button\" className=\"commentBtn\"  value={commentFormOpened} onClick={onToggleComment} />\r\n                            <button type=\"button\" className=\"likeBtn\" /> \r\n                            <button type=\"button\" className=\"removeBtn\" />\r\n                            {commentFormOpened===true &&\r\n                                <form className=\"commentbox\" onSubmit={onSubmitComment}>\r\n                                    <textarea className=\"comment\" value={comments} onChange={onChangeComment} />\r\n                                    <button type=\"primary\" htmlType=\"submit\" className=\"combtn\" loading={isAddingComment} >COMMENT</button>\r\n                                </form>\r\n                            }\r\n                            {/* 댓글올라갈부분 */}\r\n                            {/* {commentFormOpened===true && mainPosts.map((c) => (\r\n                                <div key={c} style={{display:\"inline-block\",width:\"100%\",height:\"100px\"}}>\r\n                                    <div className=\"comline\">\r\n                                        댓글\r\n                                        <button type=\"button\" className=\"remove\">REMOVE</button>\r\n                                    </div>   \r\n                                </div>\r\n                            ))} */}\r\n                            {commentFormOpened===true && \r\n                                <div style={{display:\"inline-block\",width:\"100%\",height:\"100px\"}}>\r\n                                    <div className=\"comline\"></div>\r\n                                    {/* <p>{post.Comments ? post.Comments.length + '댓글' : 0 + '댓글'}</p> */}\r\n                                    {  mainPosts.map((t) => {\r\n                                        return( \r\n                                            <li key={t.createdAt}>\r\n                                                {t.User.nickname} : {t.content}\r\n                                                <button type=\"button\" className=\"remove\" >REMOVE</button>\r\n                                            </li>\r\n                                        );\r\n                                    })\r\n                                    }\r\n                                </div>\r\n                            }\r\n                        </div> \r\n                    </div>\r\n                );\r\n            })\r\n            }\r\n        </div>\r\n    );\r\n    \r\n\r\n};\r\n\r\nContentForm.propTypes={\r\n    post: PropTypes.shape({\r\n        User: PropTypes.object,\r\n        content: PropTypes.string,\r\n        img: PropTypes.string,\r\n        createdAt: PropTypes.object,\r\n    }),\r\n};\r\n\r\n\r\n\r\n\r\nexport default ContentForm;\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAFA;AAMA;AAEA;AACA;AACA;AAEA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAOA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AADA;AAYA;;;;A","sourceRoot":""}