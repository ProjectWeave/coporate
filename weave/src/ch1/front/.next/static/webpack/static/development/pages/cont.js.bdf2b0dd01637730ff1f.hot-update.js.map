{"version":3,"file":"static/webpack/static\\development\\pages\\cont.js.bdf2b0dd01637730ff1f.hot-update.js","sources":["webpack:///./components/ContentForm.js"],"sourcesContent":["// mode변경 test\r\nimport React, { useCallback, useState, useEffect }  from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { ADD_COMMENT_REQUEST } from '../reducers/post';\r\n\r\nimport '../components/Contents.css';\r\nimport '../components/reset.css';\r\n\r\nconst ContentForm = ({post}) => {\r\n    \r\n    const [comments, setComments ] = useState('');\r\n    const [ commentFormOpened, setCommentFormOpened] = useState(false);\r\n    const { me } = useSelector(state => state.user);\r\n    const dispatch = useDispatch();\r\n\r\n    const { imagePaths, postAdded, mainPosts, commentAdded, isAddingComment,CommentPosts } = useSelector(state => state.post);\r\n\r\n    // 댓글\r\n    const onChangeComment = useCallback((e) => {\r\n        setComments(e.target.value);\r\n    }, []);\r\n\r\n    //댓글창토글\r\n    const onToggleComment = useCallback(() => {\r\n        setCommentFormOpened(prev => !prev);\r\n      }, []);\r\n\r\n    // 댓글올리기 사이클\r\n    const onSubmitComment = useCallback((e) => {\r\n        e.preventDefault();\r\n        if(!me){\r\n            return alert('로그인이 필요합니다.');\r\n        }\r\n        return dispatch({\r\n            type: ADD_COMMENT_REQUEST,\r\n            data:{\r\n                postId: post.id,\r\n            },\r\n        });\r\n    }, [me && me.id]);\r\n    \r\n    // 댓글 성공시, 빈텍스트로 \r\n    useEffect(() => {\r\n        setComments('');\r\n    },[commentAdded === true]);\r\n\r\n    const onRemoveComments = () => {\r\n        alert('댓글을 삭제하시겠습니까?');\r\n    };\r\n\r\n    return(\r\n        <>\r\n            <div className=\"postbox\">   \r\n                <div className=\"contBox\">\r\n                    <p>{user.UserId} 님의 게시물</p>\r\n                    <img style={{display:\"block\", margin:\"0 auto\", height:\"200px\"}} alt=\"example\" src={post.img}/> \r\n                    <div>{post.content}</div>\r\n                </div>\r\n                <div className=\"btnsbox\">\r\n                    <button type=\"button\" className=\"commentBtn\"  value={commentFormOpened} onClick={onToggleComment} />\r\n                    <button type=\"button\" className=\"likeBtn\" /> \r\n                    <button type=\"button\" className=\"removeBtn\" />\r\n                    {commentFormOpened===true &&\r\n                        <form className=\"commentbox\" onSubmit={onSubmitComment}>\r\n                            <textarea className=\"comment\" value={comments} onChange={onChangeComment} />\r\n                            <button type=\"primary\" htmlType=\"submit\" className=\"combtn\" loading={isAddingComment} >COMMENT</button>\r\n                        </form>\r\n                    }\r\n                    {/* 댓글올라갈부분 */}\r\n                    {commentFormOpened===true && (\r\n                        <div style={{display:\"inline-block\", width:\"100%\"}}>\r\n                            <p style={{marginLeft:\"10px\"}}>{commentAdded ? '댓글' + post.Comments.length : '댓글'+ '0'}</p>\r\n                            <div className=\"comline\"></div>\r\n\r\n                            { CommentPosts.map((v) => {\r\n                                return( \r\n                                    <li key={v.createdAt} style={{\r\n                                        listStyle:\"none\", display:\"inline-block\", clear:\"both\"}}\r\n                                    >\r\n                                        {v.User.nickname} : {v.content}\r\n                                        <button type=\"button\" className=\"remove\" onClick={onRemoveComments} >REMOVE</button>\r\n                                    </li>\r\n                                );\r\n                            })\r\n                            }\r\n                        </div>\r\n                        )\r\n                    }\r\n                </div> \r\n            </div>\r\n        </>\r\n    );\r\n    \r\n\r\n};\r\n\r\nContentForm.propTypes={\r\n    post: PropTypes.shape({\r\n        User: PropTypes.object,\r\n        content: PropTypes.string,\r\n        img: PropTypes.string,\r\n    }),\r\n};\r\n\r\n\r\nexport default ContentForm;\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AADA;AAFA;AAMA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AACA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AADA;AASA;;;;A","sourceRoot":""}